#!/bin/bash
mongo localhost:27017/store_sales --eval 'db.store_sales.aggregate([{"$match":{"$and":[{"date.d_year":2000},{"$or":[{"$and":[{"item.i_category":{"$in":["Music","Home","Sports"]}},{"item.i_class":{"$in":["country","rugs","fishing"]}}]},{"$and":[{"item.i_category":{"$in":["Women","Children","Men"]}},{"item.i_class":{"$in":["swimwear","shirts","pants"]}}]}]}]}},{"$project":{"item.i_category":1,"item.i_class":1,"item.i_brand":1,"s_store_name":1, "s_company_name":1,"date.d_moy":1, "ss_sales_price":1}},{"$group":{"_id":{"i_category":"$item.i_category","i_class":"$item.i_class","i_brand":"$item.i_brand","s_store_name":"$s_store_name", "s_company_name":"$s_company_name","d_moy":"$date.d_moy"}, "sum_sales":{"$sum":"$ss_sales_price"}}}]).toArray()' >>~/Documentos/benchmarktpc/mongoDB/store_sales/resultados/query10.txt