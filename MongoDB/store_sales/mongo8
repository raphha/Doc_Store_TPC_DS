#!/bin/bash
mongo localhost:27017/store_sales --eval 'db.store_sales.aggregate([{"$match":{"$and":[{"$or":[{"customer.hd_dep_count":5},{"customer.hd_vehicle_count":{"$gt":2}}]},{"date.d_year":{"$in":[1998,1999,2000]}},{"date.d_dow":1},{"s_number_employees":{"$gte":200, "$lte":295}}]}},{"$project":{"ss_ticket_number":1, "customer.c_customer_sk":1, "s_city":1,"ss_coupon_amt":1}},{"$group":{"_id":{"ss_ticket_number":"$ss_ticket_number", "customer.c_customer_sk":"$customer.c_customer_sk", "s_city":"$s_city"}, "amt":{"$sum":"$ss_coupon_amt"}}}]).toArray()' >>~/Documentos/benchmarktpc/mongoDB/store_sales/resultados/query8.txt