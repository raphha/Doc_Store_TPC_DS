#!/bin/bash
mongo localhost:27017/store_sales --eval 'db.store_sales.aggregate([{"$match":{"$and":[{"$or":[{"customer.hd_dep_count":4},{"customer.hd_vehicle_count":2}]},{"date.d_year":{"$in":[1999,2000,2001]}},{"date.d_dom":{"$in":[20,21]}},{"s_city":"Midway"}]}},{"$project":{"customer.c_last_name":1, "customer.c_first_name":1, "customer.ca_city":1,"ss_ticket_number":1,"ss_ext_sales_price":1}},{$group:{"_id":{"customer.c_last_name": "$customer.c_last_name","customer.c_first_name":"$customer.c_first_name", "customer.ca_city":"$customer.ca_city", "ss_ticket_number": "$ss_ticket_number"}, "agg":{"$sum":"$ss_ext_sales_price"}}}]).toArray()' >>~/Documentos/benchmarktpc/mongoDB/store_sales/resultados/query6.txt