#!/bin/bash
mongo localhost:27017/item --eval 'db.item.aggregate([{"$match":{"$and":[{"$or":[{"$and":[{"store_sales.customer.hd_dep_count":1},{"store_sales.customer.hd_vehicle_count":{"$lte":3}}]},{"$and":[{"store_sales.customer.hd_dep_count":2},{"store_sales.customer.hd_vehicle_count":{"$lte":4}}]},{"$and":[{"store_sales.customer.hd_dep_count":3},{"store_sales.customer.hd_vehicle_count":{"$lte":5}}]}]},{"store_sales.time.t_hour":8},{"store_sales.time.t_minute":{"$gte":30}},{"store_sales.s_store_name":"ese"}]}},{"$unwind": "$store_sales"},{"$match":{"$and":[{"$or":[{"$and":[{"store_sales.customer.hd_dep_count":1},{"store_sales.customer.hd_vehicle_count":{"$lte":3}}]},{"$and":[{"store_sales.customer.hd_dep_count":2},{"store_sales.customer.hd_vehicle_count":{"$lte":4}}]},{"$and":[{"store_sales.customer.hd_dep_count":3},{"store_sales.customer.hd_vehicle_count":{"$lte":5}}]}]},{"store_sales.time.t_hour":8},{"store_sales.time.t_minute":{"$gte":30}},{"store_sales.s_store_name":"ese"}]}},{"$group":{"_id":null, "h8_30_to_9":{"$sum":1}}}]).toArray()' >>~/Documentos/benchmarktpc/mongoDB/item/resultados/query9.txt