#!/bin/bash
mongo localhost:27017/item --eval 'db.item.aggregate([{$match:{$and:[{"i_category":{"$in":["Music","Home","Sports"]}},{"store_sales.date.d_date":{"$gte":"2002-01-01","$lte":"2002-01-31"}}]}},{$unwind: "$store_sales"},{$match:{$and:[{"i_category":{"$in":["Music","Home","Sports"]}},{"store_sales.date.d_date":{"$gte":"2002-01-01","$lte":"2002-01-31"}}]}},{$project:{"i_item_id":1, "i_item_desc":1, "i_category":1,"i_class":1, "store_sales.ss_ext_sales_price":1}},{$group:{"_id":{"i_item_id":"$i_item_id", "i_item_desc":"$i_item_desc", "i_category":"$i_category","i_class":"$i_class"}, itemrevenue:{$sum:"$store_sales.ss_ext_sales_price"}}}]).toArray()' >>~/Documentos/benchmarktpc/mongoDB/item/resultados/query12.txt