#!/bin/bash
mongo localhost:27017/item --eval 'db.item.aggregate([{"$match":{"$and":[{"$or":[{"$and":[{"i_category":{"$in":["Music","Home","Sports"]}},{"i_class":{"$in":["country","rugs","fishing"]}}]},{"$and":[{"i_category":{"$in":["Women","Children","Men"]}},{"i_class":{"$in":["swimwear","shirts","pants"]}}]}]}, {"store_sales.date.d_year":2000}]}},{"$unwind": "$store_sales"},{"$match":{"$and":[{"$or":[{"$and":[{"i_category":{"$in":["Music","Home","Sports"]}},{"i_class":{"$in":["country","rugs","fishing"]}}]},{"$and":[{"i_category":{"$in":["Women","Children","Men"]}},{"i_class":{"$in":["swimwear","shirts","pants"]}}]}]}, {"store_sales.date.d_year":2000}]}},{"$project":{"i_category":1,"i_class":1,"i_brand":1,"store_sales.s_store_name":1, "store_sales.s_company_name":1,"store_sales.date.d_moy":1, "store_sales.ss_sales_price":1}},{"$group":{"_id":{"i_category":"$i_category","i_class":"$i_class","i_brand":"$i_brand","s_store_name":"$store_sales.s_store_name", "s_company_name":"$store_sales.s_company_name","d_moy":"$store_sales.date.d_moy"}, "sum_sales":{"$sum":"$store_sales.ss_sales_price"}}}]).toArray()' >>~/Documentos/benchmarktpc/mongoDB/item/resultados/query10.txt