#!/bin/bash
mongo localhost:27017/item --eval 'db.item.aggregate([{"$match":{"$and":[{"i_manager_id":20},{"store_sales.date.d_moy":11},{"store_sales.date.d_year":2001},{"store_sales.customer.ca_zip":"35709"}]}},{"$unwind": "$store_sales"},{"$match":{"$and":[{"i_manager_id":20},{"store_sales.date.d_moy":11},{"store_sales.date.d_year":2001},{"store_sales.customer.ca_zip":"35709"}]}},{"$project":{"i_brand_id":1, "i_brand":1, "i_manufact_id":1, "i_manufact":1, "store_sales.ss_ext_sales_price":1}},{$group:{"_id":{"i_brand_id": "$i_brand_id","i_brand":"$i_brand","i_manufact_id":"$i_manufact_id","i_manufact":"$i_manufact"}, "ext_price":{"$sum":"$store_sales.ss_ext_sales_price"}}}]).toArray()' >>~/Documentos/benchmarktpc/mongoDB/item/resultados/query3.txt