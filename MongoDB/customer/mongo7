#!/bin/bash
mongo localhost:27017/customer --eval 'db.customer.aggregate([{"$match":{"$and":[{"store_sales.item.i_manager_id":1},{"store_sales.date.d_moy":11},{"store_sales.date.d_year":2001},{"store_sales.time.t_meal_time":{"$in":["breakfast","dinner"]}}]}},{"$unwind": "$store_sales"},{"$match":{"$and":[{"store_sales.item.i_manager_id":1},{"store_sales.date.d_moy":11},{"store_sales.date.d_year":2001},{"store_sales.time.t_meal_time":{"$in":["breakfast","dinner"]}}]}},{"$project":{"store_sales.item.i_brand":1, "store_sales.item.i_brand_id":1, "store_sales.time.t_hour":1, "store_sales.time.t_minute":1, "store_sales.ss_ext_sales_price":1}},{$group:{"_id":{"i_brand": "$store_sales.item.i_brand","i_brand_id":"$store_sales.item.i_brand_id","t_hour":"$store_sales.time.t_hour","t_minute":"$store_sales.time.t_minute"}, "ext_price":{"$sum":"$store_sales.ss_ext_sales_price"}}}]).toArray()' >>~/Documentos/benchmarktpc/mongoDB/customer/resultados/query7.txt